# 用户、组与权限

## 一、操作系统用户分类

### 1.1 用户分类

- **管理员用户：**root，拥有整个系统下最高权限
- **普通用户**：拥有个人用户的最高权限
- **傀儡用户：**只为了运行程序而存在，**不能登录**

### 2.2 系统中用户分类表示

| 用户     | UID（default） |
| -------- | -------------- |
| root     | 0              |
| 傀儡用户 | 1-999          |
| 普通用户 | 1000+          |



## 二、用户相关的配置文件

### 2.1 用户信息 passwd

```bash
root:x:0:0:root:/root:/bin/bash
```

- 第1列：用户名
- 第2列：密码占位符（shadow文件）
- 第3列：UID
- 第4列：GID
- 第5列：用户别名
- 第6列：家目录
- 第7列：命令解释器

### 2.2 用户密码信息 shadow

```bash
sliman:$6$E6bAwlD5$KBfnX1wT8fPz2MyFkAmL5cJLHZFGa3KajFAXE3dm9SQBR53/ebThIsQUrrl2krf1ViiBTTOfOpzXx3ghbWifj/:20397:0:99999:7:::
```

- 第1列：用户名
- 第2列：加密密码
- 第3列：最后修改时间
- 第4列：最小修改间隔，0表示可随时修改
- 第5列：密码有效期
- 第6列：过期前警告天数
- 第7列：密码过期宽限
- 第8列：账号失效日期
- 第9列：保留字段

### 2.3 用户组信息 group

```bash
root:x:0:
```

- 第1列：组名
- 第2列：组密码
- 第3列：GID
- 第4列：组成员列表，**不含组主用户**

### 2.4 用户组密码信息 gshadow

```bash
root:::
```

- 第1列：组名
- 第2列：组密码**（已淘汰功能）**
- 第3列：组管理员
- 第4列：组成员列表



## 三、用户相关的目录

### 3.1 用户家模板 skel

**创建用户的流程：**

1. `useradd sliman` 命令创建用户
2. 将 `/etc/skel/` 目录下的所有隐藏文件拷贝到 `sliman` 的家目录
3. 修改文件属主和属组

**如果命令行左侧变成bash版本号怎么办？**

<span id="interviewQuestion"></span>

1. 注释掉 `/etc/profile` 中的`PS1` 赋值行（如有）
2. 删除/备份家目录下的 `.bash_profile` 和 `.bashrc`
3. 命令 `cp /etc/skel/.* .` 拷贝 `skel` 目录下的所有文件到家目录
4. 重新进入会话
